<html>
	<body>
    <article >
        <h2>Idioms</h2>
        <p>A collection of random and frequently used idioms in Kotlin. If you have a favorite idiom, contribute it by sending a pull request.</p>
        <h2 id="creating-dtos-pojospocos">Creating DTOs (POJOs/POCOs)<a class="anchor" href="#creating-dtos-pojospocos"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">data</span> <span class="cm-keyword">class</span> <span class="cm-def">Customer</span>(<span class="cm-keyword">val</span> <span class="cm-def">name</span>: <span class="cm-variable-3">String</span>, <span class="cm-keyword">val</span> <span class="cm-def">email</span>: <span class="cm-variable-3">String</span>)
</code></pre>
        <p>provides a <code>Customer</code> class with the following functionality:</p>
        <ul>
            <li>getters (and setters in case of <em class="keyword">var</em>s) for all properties</li>
            <li><code>equals()</code></li>
            <li><code>hashCode()</code></li>
            <li><code>toString()</code></li>
            <li><code>copy()</code></li>
            <li><code>component1()</code>, <code>component2()</code>, â€¦, for all properties </li>
        </ul>
        <h2 id="default-values-for-function-parameters">Default values for function parameters<a class="anchor" href="#default-values-for-function-parameters"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">fun</span> <span class="cm-def">foo</span>(<span class="cm-variable">a</span>: <span class="cm-variable">Int</span> <span class="cm-operator">=</span> <span class="cm-number">0</span>, <span class="cm-variable">b</span>: <span class="cm-variable-3">String</span> <span class="cm-operator">=</span> <span class="cm-string">""</span>) { ... }
</code></pre>
        <h2 id="filtering-a-list">Filtering a list<a class="anchor" href="#filtering-a-list"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">positives</span> <span class="cm-operator">=</span> <span class="cm-variable">list</span>.<span class="cm-variable">filter</span> { <span class="cm-variable">x</span> <span class="cm-operator">-&gt;</span> <span class="cm-variable">x</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span> }
</code></pre>
        <p>Or alternatively, even shorter:</p>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">positives</span> <span class="cm-operator">=</span> <span class="cm-variable">list</span>.<span class="cm-variable">filter</span> { <span class="cm-variable">it</span> <span class="cm-operator">&gt;</span> <span class="cm-number">0</span> }
</code></pre>
        <h2 id="string-interpolation">String Interpolation<a class="anchor" href="#string-interpolation"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-variable">println</span>(<span class="cm-string">"Name $name"</span>)
</code></pre>
        <h2 id="instance-checks">Instance Checks<a class="anchor" href="#instance-checks"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">when</span> (<span class="cm-variable">x</span>) {
    <span class="cm-keyword">is</span> <span class="cm-variable">Foo</span> <span class="cm-operator">-&gt;</span> ...
    <span class="cm-keyword">is</span> <span class="cm-variable">Bar</span> <span class="cm-operator">-&gt;</span> ...
    <span class="cm-keyword">else</span>   <span class="cm-operator">-&gt;</span> ...
}
</code></pre>
        <h2 id="traversing-a-maplist-of-pairs">Traversing a map/list of pairs<a class="anchor" href="#traversing-a-maplist-of-pairs"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">for</span> ((<span class="cm-variable">k</span>, <span class="cm-variable">v</span>) <span class="cm-keyword">in</span> <span class="cm-variable">map</span>) {
    <span class="cm-variable">println</span>(<span class="cm-string">"$k -&gt; $v"</span>)
}
</code></pre>
        <p><code>k</code>, <code>v</code> can be called anything.</p>
        <h2 id="using-ranges">Using ranges<a class="anchor" href="#using-ranges"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">for</span> (<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1.</span>.<span class="cm-number">100</span>) { ... }  <span class="cm-comment">// closed range: includes 100</span>
<span class="cm-keyword">for</span> (<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1</span> <span class="cm-variable">until</span> <span class="cm-number">100</span>) { ... } <span class="cm-comment">// half-open range: does not include 100</span>
<span class="cm-keyword">for</span> (<span class="cm-variable">x</span> <span class="cm-keyword">in</span> <span class="cm-number">2.</span>.<span class="cm-number">10</span> <span class="cm-variable">step</span> <span class="cm-number">2</span>) { ... }
<span class="cm-keyword">for</span> (<span class="cm-variable">x</span> <span class="cm-keyword">in</span> <span class="cm-number">10</span> <span class="cm-variable">downTo</span> <span class="cm-number">1</span>) { ... }
<span class="cm-keyword">if</span> (<span class="cm-variable">x</span> <span class="cm-keyword">in</span> <span class="cm-number">1.</span>.<span class="cm-number">10</span>) { ... }
</code></pre>
        <h2 id="read-only-list">Read-only list<a class="anchor" href="#read-only-list"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">list</span> <span class="cm-operator">=</span> <span class="cm-variable">listOf</span>(<span class="cm-string">"a"</span>, <span class="cm-string">"b"</span>, <span class="cm-string">"c"</span>)
</code></pre>
        <h2 id="read-only-map">Read-only map<a class="anchor" href="#read-only-map"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">map</span> <span class="cm-operator">=</span> <span class="cm-variable">mapOf</span>(<span class="cm-string">"a"</span> <span class="cm-variable">to</span> <span class="cm-number">1</span>, <span class="cm-string">"b"</span> <span class="cm-variable">to</span> <span class="cm-number">2</span>, <span class="cm-string">"c"</span> <span class="cm-variable">to</span> <span class="cm-number">3</span>)
</code></pre>
        <h2 id="accessing-a-map">Accessing a map<a class="anchor" href="#accessing-a-map"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-variable">println</span>(<span class="cm-variable">map</span>[<span class="cm-string">"key"</span>])
<span class="cm-variable">map</span>[<span class="cm-string">"key"</span>] <span class="cm-operator">=</span> <span class="cm-variable">value</span>
</code></pre>
        <h2 id="lazy-property">Lazy property<a class="anchor" href="#lazy-property"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">p</span>: <span class="cm-variable-3">String</span> <span class="cm-keyword">by</span> <span class="cm-variable">lazy</span> {
    <span class="cm-comment">// compute the string</span>
}
</code></pre>
        <h2 id="extension-functions">Extension Functions<a class="anchor" href="#extension-functions"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">fun</span> <span class="cm-variable-3">String</span>.<span class="cm-variable">spaceToCamelCase</span>() { ... }

<span class="cm-string">"Convert this to camelcase"</span>.<span class="cm-variable">spaceToCamelCase</span>()
</code></pre>
        <h2 id="creating-a-singleton">Creating a singleton<a class="anchor" href="#creating-a-singleton"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">object</span> <span class="cm-def">Resource</span> {
    <span class="cm-keyword">val</span> <span class="cm-def">name</span> <span class="cm-operator">=</span> <span class="cm-string">"Name"</span>
}
</code></pre>
        <h2 id="if-not-null-shorthand">If not null shorthand<a class="anchor" href="#if-not-null-shorthand"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">files</span> <span class="cm-operator">=</span> <span class="cm-variable">File</span>(<span class="cm-string">"Test"</span>).<span class="cm-variable">listFiles</span>()

<span class="cm-variable">println</span>(<span class="cm-variable">files</span><span class="cm-operator">?</span>.<span class="cm-variable">size</span>)
</code></pre>
        <h2 id="if-not-null-and-else-shorthand">If not null and else shorthand<a class="anchor" href="#if-not-null-and-else-shorthand"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">files</span> <span class="cm-operator">=</span> <span class="cm-variable">File</span>(<span class="cm-string">"Test"</span>).<span class="cm-variable">listFiles</span>()

<span class="cm-variable">println</span>(<span class="cm-variable">files</span><span class="cm-operator">?</span>.<span class="cm-variable">size</span> <span class="cm-operator">?</span>: <span class="cm-string">"empty"</span>)
</code></pre>
        <h2 id="executing-a-statement-if-null">Executing a statement if null<a class="anchor" href="#executing-a-statement-if-null"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">values</span> <span class="cm-operator">=</span> ...
<span class="cm-keyword">val</span> <span class="cm-def">email</span> <span class="cm-operator">=</span> <span class="cm-variable">values</span>[<span class="cm-string">"email"</span>] <span class="cm-operator">?</span>: <span class="cm-keyword">throw</span> <span class="cm-variable">IllegalStateException</span>(<span class="cm-string">"Email is missing!"</span>)
</code></pre>
        <h2 id="execute-if-not-null">Execute if not null<a class="anchor" href="#execute-if-not-null"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">value</span> <span class="cm-operator">=</span> ...

<span class="cm-variable">value</span><span class="cm-operator">?</span>.<span class="cm-variable">let</span> {
    ... <span class="cm-comment">// execute this block if not null</span>
}
</code></pre>
        <h2 id="map-nullable-value-if-not-null">Map nullable value if not null<a class="anchor" href="#map-nullable-value-if-not-null"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">value</span> <span class="cm-operator">=</span> ...

<span class="cm-keyword">val</span> <span class="cm-def">mapped</span> <span class="cm-operator">=</span> <span class="cm-variable">value</span><span class="cm-operator">?</span>.<span class="cm-variable">let</span> { <span class="cm-variable">transformValue</span>(<span class="cm-variable">it</span>) } <span class="cm-operator">?</span>: <span class="cm-variable">defaultValueIfValueIsNull</span>
</code></pre>
        <h2 id="return-on-when-statement">Return on when statement<a class="anchor" href="#return-on-when-statement"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">fun</span> <span class="cm-def">transform</span>(<span class="cm-variable">color</span>: <span class="cm-variable-3">String</span>): <span class="cm-variable">Int</span> {
    <span class="cm-keyword">return</span> <span class="cm-keyword">when</span> (<span class="cm-variable">color</span>) {
        <span class="cm-string">"Red"</span> <span class="cm-operator">-&gt;</span> <span class="cm-number">0</span>
        <span class="cm-string">"Green"</span> <span class="cm-operator">-&gt;</span> <span class="cm-number">1</span>
        <span class="cm-string">"Blue"</span> <span class="cm-operator">-&gt;</span> <span class="cm-number">2</span>
        <span class="cm-keyword">else</span> <span class="cm-operator">-&gt;</span> <span class="cm-keyword">throw</span> <span class="cm-variable">IllegalArgumentException</span>(<span class="cm-string">"Invalid color param value"</span>)
    }
}
</code></pre>
        <h2 id="trycatch-expression">'try/catch' expression<a class="anchor" href="#trycatch-expression"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">fun</span> <span class="cm-def">test</span>() {
    <span class="cm-keyword">val</span> <span class="cm-def">result</span> <span class="cm-operator">=</span> <span class="cm-keyword">try</span> {
        <span class="cm-variable">count</span>()
    } <span class="cm-keyword">catch</span> (<span class="cm-variable">e</span>: <span class="cm-variable">ArithmeticException</span>) {
        <span class="cm-keyword">throw</span> <span class="cm-variable">IllegalStateException</span>(<span class="cm-variable">e</span>)
    }

    <span class="cm-comment">// Working with result</span>
}
</code></pre>
        <h2 id="if-expression">'if' expression<a class="anchor" href="#if-expression"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">fun</span> <span class="cm-def">foo</span>(<span class="cm-keyword">param</span>: <span class="cm-variable">Int</span>) {
    <span class="cm-keyword">val</span> <span class="cm-def">result</span> <span class="cm-operator">=</span> <span class="cm-keyword">if</span> (<span class="cm-keyword">param</span> <span class="cm-operator">==</span> <span class="cm-number">1</span>) {
        <span class="cm-string">"one"</span>
    } <span class="cm-keyword">else</span> <span class="cm-keyword">if</span> (<span class="cm-keyword">param</span> <span class="cm-operator">==</span> <span class="cm-number">2</span>) {
        <span class="cm-string">"two"</span>
    } <span class="cm-keyword">else</span> {
        <span class="cm-string">"three"</span>
    }
}
</code></pre>
        <h2 id="builder-style-usage-of-methods-that-return-unit">Builder-style usage of methods that return <code>Unit</code><a class="anchor" href="#builder-style-usage-of-methods-that-return-unit"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">fun</span> <span class="cm-def">arrayOfMinusOnes</span>(<span class="cm-variable">size</span>: <span class="cm-variable">Int</span>): <span class="cm-variable">IntArray</span> {
    <span class="cm-keyword">return</span> <span class="cm-variable">IntArray</span>(<span class="cm-variable">size</span>).<span class="cm-variable">apply</span> { <span class="cm-variable">fill</span>(<span class="cm-operator">-</span><span class="cm-number">1</span>) }
}
</code></pre>
        <h2 id="single-expression-functions">Single-expression functions<a class="anchor" href="#single-expression-functions"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">fun</span> <span class="cm-def">theAnswer</span>() <span class="cm-operator">=</span> <span class="cm-number">42</span>
</code></pre>
        <p>This is equivalent to</p>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">fun</span> <span class="cm-def">theAnswer</span>(): <span class="cm-variable">Int</span> {
    <span class="cm-keyword">return</span> <span class="cm-number">42</span>
}
</code></pre>
        <p>This can be effectively combined with other idioms, leading to shorter code. E.g. with the <em class="keyword">when</em>-expression:</p>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">fun</span> <span class="cm-def">transform</span>(<span class="cm-variable">color</span>: <span class="cm-variable-3">String</span>): <span class="cm-variable">Int</span> <span class="cm-operator">=</span> <span class="cm-keyword">when</span> (<span class="cm-variable">color</span>) {
    <span class="cm-string">"Red"</span> <span class="cm-operator">-&gt;</span> <span class="cm-number">0</span>
    <span class="cm-string">"Green"</span> <span class="cm-operator">-&gt;</span> <span class="cm-number">1</span>
    <span class="cm-string">"Blue"</span> <span class="cm-operator">-&gt;</span> <span class="cm-number">2</span>
    <span class="cm-keyword">else</span> <span class="cm-operator">-&gt;</span> <span class="cm-keyword">throw</span> <span class="cm-variable">IllegalArgumentException</span>(<span class="cm-string">"Invalid color param value"</span>)
}
</code></pre>
        <h2 id="calling-multiple-methods-on-an-object-instance-with">Calling multiple methods on an object instance ('with')<a class="anchor" href="#calling-multiple-methods-on-an-object-instance-with"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">class</span> <span class="cm-def">Turtle</span> {
    <span class="cm-keyword">fun</span> <span class="cm-def">penDown</span>()
    <span class="cm-keyword">fun</span> <span class="cm-def">penUp</span>()
    <span class="cm-keyword">fun</span> <span class="cm-def">turn</span>(<span class="cm-variable">degrees</span>: <span class="cm-variable-3">Double</span>)
    <span class="cm-keyword">fun</span> <span class="cm-def">forward</span>(<span class="cm-variable">pixels</span>: <span class="cm-variable-3">Double</span>)
}

<span class="cm-keyword">val</span> <span class="cm-def">myTurtle</span> <span class="cm-operator">=</span> <span class="cm-variable">Turtle</span>()
<span class="cm-variable">with</span>(<span class="cm-variable">myTurtle</span>) { <span class="cm-comment">//draw a 100 pix square</span>
    <span class="cm-variable">penDown</span>()
    <span class="cm-keyword">for</span>(<span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-number">1.</span>.<span class="cm-number">4</span>) {
        <span class="cm-variable">forward</span>(<span class="cm-number">100.0</span>)
        <span class="cm-variable">turn</span>(<span class="cm-number">90.0</span>)
    }
    <span class="cm-variable">penUp</span>()
}
</code></pre>
        <h2 id="java-7s-try-with-resources">Java 7's try with resources<a class="anchor" href="#java-7s-try-with-resources"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">stream</span> <span class="cm-operator">=</span> <span class="cm-variable">Files</span>.<span class="cm-variable">newInputStream</span>(<span class="cm-variable">Paths</span>.<span class="cm-keyword">get</span>(<span class="cm-string">"/some/file.txt"</span>))
<span class="cm-variable">stream</span>.<span class="cm-variable">buffered</span>().<span class="cm-variable">reader</span>().<span class="cm-variable">use</span> { <span class="cm-variable">reader</span> <span class="cm-operator">-&gt;</span>
    <span class="cm-variable">println</span>(<span class="cm-variable">reader</span>.<span class="cm-variable">readText</span>())
}
</code></pre>
        <h2 id="convenient-form-for-a-generic-function-that-requires-the-generic-type-information">Convenient form for a generic function that requires the generic type information<a class="anchor" href="#convenient-form-for-a-generic-function-that-requires-the-generic-type-information"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-comment">//  public final class Gson {</span>
<span class="cm-comment">//     ...</span>
<span class="cm-comment">//     public &lt;T&gt; T fromJson(JsonElement json, Class&lt;T&gt; classOfT) throws JsonSyntaxException {</span>
<span class="cm-comment">//     ...</span>

<span class="cm-keyword">inline</span> <span class="cm-keyword">fun</span> <span class="cm-operator">&lt;</span><span class="cm-keyword">reified</span> <span class="cm-variable">T</span>: <span class="cm-variable">Any</span><span class="cm-operator">&gt;</span> <span class="cm-variable">Gson</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">json</span>: <span class="cm-variable">JsonElement</span>): <span class="cm-variable">T</span> <span class="cm-operator">=</span> <span class="cm-keyword">this</span>.<span class="cm-variable">fromJson</span>(<span class="cm-variable">json</span>, <span class="cm-variable">T</span>::<span class="cm-keyword">class</span>.<span class="cm-variable">java</span>)
</code></pre>
        <h2 id="consuming-a-nullable-boolean">Consuming a nullable Boolean<a class="anchor" href="#consuming-a-nullable-boolean"></a></h2>
        <pre><code class="code _highlighted cm-s-default" data-lang="text/x-kotlin"><span class="cm-keyword">val</span> <span class="cm-def">b</span>: <span class="cm-variable-3">Boolean</span><span class="cm-operator">?</span> <span class="cm-operator">=</span> ...
<span class="cm-keyword">if</span> (<span class="cm-variable">b</span> <span class="cm-operator">==</span> <span class="cm-atom">true</span>) {
    ...
} <span class="cm-keyword">else</span> {
    <span class="cm-comment">// `b` is false or null</span>
}
</code></pre>

    </article>
	</body>
    <link href="file:///android_asset/css/general.css" type="text/css" rel="stylesheet" />
</html>